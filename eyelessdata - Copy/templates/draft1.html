{% extends 'base2.html' %}
{% block prof %}
{% for d in data2 %}
<img alt="" src=..{{d.7}} style="width:50px;height:50px">
<span class="username">{{d.1}}</span>
{% endfor%}
{% endblock %}
{% block content %}
<!--main content start-->

	<section class="wrapper">
		<div class="mail-w3agile">
        <!-- page start-->
        <div class="row">

            <div class="col-sm-3 com-w3ls">
                <section class="panel">
                    <div class="panel-body">
                        <a href="/message/"  class="btn btn-compose">
                            Compose Mail
                        </a>
                        <ul class="nav nav-pills nav-stacked mail-nav">
                            <li class="active"><a href="/inbox/"> <i class="fa fa-inbox"></i> Inbox  <span class="label label-danger pull-right inbox-notification">9</span></a></li>
                            <li><a href="/sent/"> <i class="fa fa-envelope-o"></i> Send Mail</a></li>
                            
                            <li><a href="/draft/"> <i class="fa fa-file-text-o"></i> Drafts <span class="label label-info pull-right inbox-notification">123</span></a></a></li>
                        
                        </ul>
                    </div>
                </section>

               
            </div>
            <div class="col-sm-9 mail-w3agile">
                <section class="panel">
                    <header class="panel-heading wht-bg">
                       <h4 class="gen-case">Drafts
                        <form action="#" class="pull-right mail-src-position">
                            <div class="input-append">
                                
                            </div>
                        </form>
                       </h4>
                    </header>
                    <div class="panel-body minimal">
                        <div class="mail-option">
                            
       
		
        <form method="POST">
                <form method="POST">
                        <link href='http://fonts.googleapis.com/css?family=Belgrano' rel='stylesheet' type='text/css'>
                <!-- jQuery file -->
                <script src="js/jquery.min.js"></script>
                     <script src="http://responsivevoice.org/responsivevoice/responsivevoice.js"></script>
            {% csrf_token %}
            <table class="table">
                
                <tr>
                    <td>Sendto:</td>
                    <td><input type="text" id="sendto" class="form-control" name="sendto" value="{{frm1}}"></td>
                </tr>
                <tr>
                    <td>subject:</td>
                    <td><input type="text" id="subject" class="form-control" name="subject" value="{{sub}}"></td>
                </tr>
                <tr>
                    <td>content:</td>
                    <td><textarea rows="9" cols="22" id="content" class="form-control" name="content" value="{{con}}">{{con}}</textarea></td>
                    </tr>
                <tr>
                    <td></td>
                    <td><input type="submit" class="btn btn-primary btn-sm" name="reply" value="Reply">
                </tr>
            </table>

            
            <script type="text/javascript">
                // Test browser support
                debugger;
                var flag_to = 0;
                var flag_sub = 0;
                var flag_content =0;
                window.SpeechRecognition = window.SpeechRecognition ||
                                               window.webkitSpeechRecognition ||
                                               null;
                                               var msg =  document.getElementById('content').value;
                                var to = document.getElementById('sendto').value;
                                var sub =  document.getElementById('subject').value;
                            
                                responsiveVoice.speak('message to '+to+' Subject '+sub+' content '+msg);
                if (window.SpeechRecognition === null) {
                    document.getElementById('ws-unsupported').classList.remove('hidden');
                    document.getElementById('button-play-ws').setAttribute('disabled', 'disabled');
                    document.getElementById('button-stop-ws').setAttribute('disabled', 'disabled');
                } else {
                    var recognizer = new window.SpeechRecognition();
                    var transcription = document.getElementById('myContent');
                    var txt_to = document.getElementById('txt_to');
                    var txt_sub = document.getElementById('txt_sub');
                    //var log = document.getElementById('log');
           
                    // Recogniser doesn't stop listening even if the user pauses
                    recognizer.continuous = true;
                    // Start recognising
                    recognizer.onresult = function (event) {
                        //transcription.textContent = '';
                        debugger;
           
                        for (var i = event.resultIndex; i < event.results.length; i++) {
                            var flag_val = $.trim(event.results[i][0].transcript);
                            if (flag_val == "Send" || flag_val == "send" || flag_val == "Sent" || flag_val=="sent") {
                                var msg = $('#myContent').val();
                                var to = $('#txt_to').val();
                                var sub = $('#txt_sub').val();
                                responsiveVoice.speak('Message Send Successfully');
                                window.location.href = "/message/?msg='" + msg + "'&to='"+to+"'&sub='"+sub+"'";
                            }
                            if (flag_val == "To" || flag_val == "to" || flag_val == 2 || flag_val == "RTU" || flag_val == "destination" || flag_val == "Destination") {
                                flag_to = 1;
                                flag_sub = 0;
                                flag_content = 0;
                                responsiveVoice.speak('Please say destination');
                            }
                            else if (flag_val == "Subject" || flag_val == "subject") {
                                flag_sub = 1;
                                flag_to = 0;
                                flag_content = 0;
                                responsiveVoice.speak('Please say subject');
                            }
                            else if (flag_val == "Body" || flag_val == "body") {
                                flag_content = 1;
                                flag_to = 0;
                                flag_sub = 0;
                                responsiveVoice.speak('Please say mail body');
                            }
                            else if (flag_val == "read body" || flag_val == "body") {
                                var ss = $('#myContent').val();
                                responsiveVoice.speak(ss);
                            }
                            else if (flag_val == "read destination" || flag_val == "body") {
                                var ss = $('#txt_to').val();
                                responsiveVoice.speak(ss);
                            }
                            else if (flag_val == "read subject" || flag_val == "body") {
                                var ss = $('#txt_sub').val();
                                responsiveVoice.speak(ss);
                            }
                            else if (flag_val == "Home" || flag_val == "home") {
                                window.location.href = "Home.aspx";
                            }
                            else if (flag_val == "Cleare" || flag_val == "cleare" || flag_val == "clear" || flag_val == "clear all") {
                                $('#txt_to').val('');
                                $('#txt_sub').val('');
                                $('#myContent').val('');
                            }
                            else if (flag_val == "Cleare to" || flag_val == "cleare 2" || flag_val == "clear to" || flag_val == "clear destination") {
                                $('#txt_to').val('');                    
                            }
                            else if (flag_val == "Cleare subject" || flag_val == "clear subject" || flag_val == "clear" || flag_val == "clear all") {
                                $('#txt_sub').val('');
                            }
                            else if (flag_val == "Cleare body" || flag_val == "clear body" || flag_val == "clear" || flag_val == "clear all") {
                                $('#myContent').val('');
                            }
                            else if (flag_val == "Logout" || flag_val == "logout" || flag_val == "logout") {
                                responsiveVoice.speak("Plase wait a moment");
                                window.location.href = "Inbox.aspx";
                            }
                            else {
                                if (flag_to == 1) {
                                    if (event.results[i].isFinal) {
                                        $('#txt_to').val($('#txt_to').val() + ' ' + event.results[i][0].transcript);
                                    } else {
                                        $('#txt_to').val($('#txt_to').val() + ' ' + event.results[i][0].transcript);
                                    }
                                }
                                else if (flag_sub == 1) {
                                    if (event.results[i].isFinal) {
                                        // $('#txt_sub').val() += event.results[i][0].transcript;
                                        $('#txt_sub').val($('#txt_sub').val() + ' ' + event.results[i][0].transcript);
                                    } else {
                                        $('#txt_sub').val($('#txt_sub').val() + ' ' + event.results[i][0].transcript);
                                    }
                                }
                                else {
                                    if (event.results[i].isFinal) {
                                        transcription.textContent += event.results[i][0].transcript;
                                    } else {
                                        transcription.textContent += event.results[i][0].transcript;
                                    }
                                }
                            }
                        }
                    };
                    // Listen for errors
                    recognizer.onerror = function (event) {
                        // log.innerHTML = 'Recognition error: ' + event.message + '<br />' + log.innerHTML;
                    };
           
                   // document.getElementById('button-play-ws').addEventListener('click', function () {
                        // Set if we need interim results
                        recognizer.interimResults = false;
                        try {
                            recognizer.start();
                            // log.innerHTML = 'Recognition started' + '<br />' + log.innerHTML;
                        } catch (ex) {
                            //log.innerHTML = 'Recognition error: ' + ex.message + '<br />' + log.innerHTML;
                        }
                    //});
                    document.getElementById('button-stop-ws').addEventListener('click', function () {
                        recognizer.stop();
                        //log.innerHTML = 'Recognition stopped' + '<br />' + log.innerHTML;
                    });
                    document.getElementById('clear-all').addEventListener('click', function () {
                        transcription.textContent = '';
                        //log.textContent = '';
                    });
                }
                function send_btn_onclick() {
           
                }
           
               </script>
           <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
           <script type="text/javascript">
               $('#compose_btn').click(function () {
                   var msg = $('#myContent').val();
                   window.location.href = "compose.aspx?msg='" + msg + "'";
               });
           
               function compose_btn_onclick() {
           
               }
               </script>
  </section>
        
            
       
            
            <script> 
                $(window).load(function () {
                    $('#JiSlider').JiSlider({
                        color: '#fff',
                        start: 1,
                        reverse: false
                    }).addClass('ff')
                })
            </script>
            <!-- //banner-slider -->
            <!-- stats -->
            <script src="../static/attainment/js/jquery.waypoints.min.js"></script>
            <script src="../static/attainment/js/jquery.countup.js"></script>
                <script>
                    $('.counter').countUp();
                </script>
        <!-- //stats -->
        
            <!-- FlexSlider-JavaScript -->
            <script defer src="../static/attainment/js/jquery.flexslider.js"></script>
            <script type="text/javascript">
                
                        $(window).load(function(){
                        $('.flexslider').flexslider({
                            animation: "slide",
                            start: function(slider){
                                $('body').removeClass('loading');
                            }
                    });
                });
                     </script>
       
        
                            

                            
                            
                        
                    </div>
                </section>
            </div>
        </div>

        <!-- page end-->
        </div>
</section>
{% endblock %}
 
</section>
<!--main content end-->
</section>
<script src="../static/webnew/js/bootstrap.js"></script>
<script src="../static/webnew/js/jquery.dcjqaccordion.2.7.js"></script>
<script src="../static/webnew/js/scripts.js"></script>
<script src="../static/webnew/js/jquery.slimscroll.js"></script>
<script src="../static/webnew/js/jquery.nicescroll.js"></script>
<!--[if lte IE 8]><script language="javascript" type="text/javascript" src="../static/webnew/js/flot-chart/excanvas.min.js"></script><![endif]-->
<script src="../static/webnew/js/jquery.scrollTo.js"></script>
</body>
</html>
